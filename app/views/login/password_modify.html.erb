<form class="form-vertical login-form" action="/update_password" method="post" autocomplete="off">

  <h3 class="form-title">修改密码</h3>

  <div class="alert alert-error hide">

    <button class="close" data-dismiss="alert"></button>

    <span>Enter a new password.</span>

  </div>

  <div class="control-group">

    <input type="hidden" name="id" value="<%= @employee.password_reset_token %>"/>

    <label class="control-label visible-ie8 visible-ie9">New Password</label>

    <div class="controls">

      <div class="input-icon left">

        <i class="icon-lock"></i>

        <input class="m-wrap placeholder-no-fix" type="password" placeholder="New Password" name="password" id="register_password"/>

      </div>

    </div>

  </div>

  <div class="control-group">

    <label class="control-label visible-ie8 visible-ie9">Re-type Your Password</label>

    <div class="controls">

      <div class="input-icon left">

        <i class="icon-ok"></i>

        <input class="m-wrap placeholder-no-fix" type="password" placeholder="Re-type Your Password" name="rpassword"/>

      </div>

    </div>

  </div>

  <div class="form-actions">

    <button type="submit" class="btn blue pull-right">

      Submit <i class="m-icon-swapright m-icon-white"></i>

    </button>

  </div>

</form>

<!-- END LOGIN FORM -->


<script>


    App.init();

    $('.login-form').validate({
        errorElement: 'label', //default input error message container
        errorClass: 'help-inline', // default input error message class
        focusInvalid: false, // do not focus the last invalid input
        rules: {
            password: {
                required: true
            },
            rpassword: {
                equalTo: "#register_password"
            }
        },

        invalidHandler: function (event, validator) { //display error alert on form submit
            $('.alert-error', $('.login-form')).show();
        },

        highlight: function (element) { // hightlight error inputs
            $(element)
                    .closest('.control-group').addClass('error'); // set error class to the control group
        },

        success: function (label) {
            label.closest('.control-group').removeClass('error');
            label.remove();
        },

        errorPlacement: function (error, element) {
            error.addClass('help-small no-left-padding').insertAfter(element.closest('.input-icon'));
        },

        submitHandler: function (form) {
            form.submit();
        }
    });

    $('.login-form input').keypress(function (e) {
        if (e.which == 13) {
            if ($('.login-form').validate().form()) {
                $('.login-form').submit();
            }
            return false;
        }
    });

    $.backstretch([
        "<%= asset_path('image/bg/1.jpg') %>",
        "<%= asset_path('image/bg/2.jpg') %>",
        "<%= asset_path('image/bg/3.jpg') %>",
        "<%= asset_path('image/bg/4.jpg') %>"
    ], {
        fade: 1000,
        duration: 8000
    });


</script>

<!-- END REGISTRATION FORM -->

